# Désactiver MultiViews pour éviter AH00690
Options -MultiViews

RewriteEngine On

# Redirection HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Bloquer l'accès au dossier .git et fichiers sensibles
<FilesMatch "\.git">
    Require all denied
</FilesMatch>

<FilesMatch "\.(env|htaccess|htpasswd|ini|log|sql|sh|bak|swp|DS_Store)$">
    Require all denied
</FilesMatch>

# Mode maintenance
# Assurez-vous que maintenance.html existe dans public/
#RewriteCond %{REQUEST_URI} !^/maintenance\.html$
#RewriteCond %{REQUEST_URI} !^/images/
#RewriteCond %{REQUEST_URI} !^/build/
#RewriteCond %{REQUEST_URI} !^/bundles/
#RewriteCond %{REQUEST_URI} !^/favicon\.ico$
#RewriteRule ^(.*)$ /maintenance.html [R=503,L]

# Headers pour indiquer maintenance temporaire
#Header always set Retry-After "300"
#Header always set Cache-Control "no-cache, no-store, must-revalidate"

# Symfony Front Controller - pour toutes les requêtes vers index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [QSA,L]
